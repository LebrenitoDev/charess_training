{"version":3,"sources":["./src/app/configuration/topic/form/topic.form.component.ts","./src/app/configuration/topic/form/topic.form.component.html","./src/app/configuration/topic/topic.service.ts","./src/app/core/models/training/topic.ts"],"names":[],"mappings":"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","file":"default-src_app_configuration_topic_form_topic_form_component_ts-es2015.js","sourcesContent":["import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport {Component, Inject, OnInit, ViewChild} from '@angular/core';\nimport {\n    FormControl,\n    FormGroup,\n    FormBuilder,\n} from '@angular/forms';\n\nimport {startWith} from 'rxjs/operators';\nimport { Observable, map } from 'rxjs';\nimport {TopicService} from \"../topic.service\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\nimport {Topic} from \"../../../core/models/training/topic\";\n\n@Component({\n    selector: 'app-form',\n    templateUrl: './topic.form.component.html'\n})\n\nexport class TopicFormComponent implements OnInit {\n\n    action: string;\n    title: string;\n    fg: FormGroup;\n    topic: Topic;\n    themeControl = new FormControl();\n    themes=[];\n    filteredThemes: Observable<Topic[]>;\n\n    constructor(public fm: MatDialogRef<TopicFormComponent>, @Inject(MAT_DIALOG_DATA) public data: any,\n                public service: TopicService, private fb: FormBuilder, private _snackBar: MatSnackBar){\n        this.action = data.action;\n        if (this.action === 'edit') {\n            this.topic = data.topic;\n            this.title = 'Edit the current topic';\n            this.themeControl.setValue(data.topic.theme);\n        } else{\n            this.title = 'New topic';\n            this.topic = new Topic({});\n        }\n        this.fg = this.createContactForm();\n    }\n\n    ngOnInit() {\n        const ob = this.fg.getRawValue();\n        this.filteredThemes = this.themeControl.valueChanges.pipe(startWith(''),\n            map(value => {\n                this.service.getTopics(typeof value === 'string'?value.toLowerCase():value.title).subscribe((res)=>{\n                    this.themes = res.filter(r=>r.id !== ob.id);\n                });\n                return this.themes;\n            })\n        );\n    }\n\n    display(topic):string {\n        if(topic)\n            return topic.title;\n    }\n\n    createContactForm(): FormGroup {\n        return this.fb.group(this.topic);\n    }\n\n    submit() {\n    }\n\n    cancel(): void {\n        this.fm.close();\n    }\n\n    public save(): void {\n        let obj = this.fg.getRawValue();\n        obj.theme = this.themeControl.value;\n        this.service.addTopic(obj).subscribe(\n            data => this.success(),\n            (err: HttpErrorResponse)=>this.error(err)\n        );\n    }\n\n    private success(){\n        this.showNotification('bg-green','The topic has been successfully created');\n    }\n\n    private error(err:HttpErrorResponse){\n        this.showNotification('bg-red','Something went wrong the topic has not been created. Please, try again!');\n        console.error(err);\n    }\n\n    private showNotification(colorName, text) {\n        this._snackBar.open(text, '', {\n            duration: 2000,\n            verticalPosition: 'top',\n            horizontalPosition: 'right',\n            panelClass: colorName,\n        });\n    }\n}\n","<div class=\"addContainer\">\n    <div class=\"modalHeader\">\n        <div class=\"editRowModal\">\n            <div class=\"modalHeader clearfix\">\n                <div class=\"modal-about\">\n                    <div><h4><strong>{{title | translate}}</strong></h4></div>\n                </div>\n            </div>\n        </div>\n        <button mat-icon-button (click)=\"fm.close()\" aria-label=\"Close dialog\">\n            <mat-icon>close</mat-icon>\n        </button>\n    </div>\n    <div mat-dialog-content>\n        <form class=\"register-form m-4\" [formGroup]=\"fg\" (ngSubmit)=\"submit\">\n            <div class=\"row\">\n                <div>\n                    <mat-form-field class=\"example-full-width\" appearance=\"outline\">\n                        <mat-label>{{'Title' | translate}}</mat-label>\n                        <input matInput formControlName=\"title\" required>\n                        <mat-error *ngIf=\"fg.get('title').hasError('required')\">{{'This field is required' | translate}}</mat-error>\n                    </mat-form-field>\n                </div>\n            </div>\n            <div>\n                <div>\n                    <mat-form-field class=\"example-full-width\" appearance=\"outline\">\n                        <mat-label>{{'Thematic' | translate}}</mat-label>\n                        <input type=\"text\" placeholder=\"\"  matInput [formControl]=\"themeControl\" [matAutocomplete]=\"auto\">\n                        <mat-autocomplete autoActiveFirstOption #auto=\"matAutocomplete\" [displayWith]=\"display\">\n                            <mat-option *ngFor=\"let topic of filteredThemes | async\" [value]=\"topic\">\n                                {{topic.title}}\n                            </mat-option>\n                        </mat-autocomplete>\n                    </mat-form-field>\n                </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2\">\n                    <div class=\"example-button-row\">\n                        <button mat-raised-button color=\"primary\" [type]=\"submit\" [disabled]=\"!fg.valid\" [mat-dialog-close]=\"1\" (click)=\"save()\">{{'Save' | translate}}</button>\n                        <button mat-raised-button color=\"warn\" (click)=\"cancel()\" tabindex=\"-1\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n\n","import {Injectable} from '@angular/core';\r\nimport {BehaviorSubject} from 'rxjs';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {UnsubscribeOnDestroyAdapter} from 'src/app/shared/UnsubscribeOnDestroyAdapter';\r\nimport {environment} from \"../../../environments/environment\";\r\nimport {Topic} from \"../../core/models/training/topic\";\r\n\r\n@Injectable()\r\nexport class TopicService extends UnsubscribeOnDestroyAdapter {\r\n\r\n    api = `${environment.api}/topic`;\r\n\r\n    constructor(private http: HttpClient) {\r\n        super();\r\n    }\r\n\r\n    getAllTopics(){\r\n        return this.http.get<Topic[]>(this.api);\r\n    }\r\n\r\n    getTopics(criteria:string){\r\n        return this.http.get<Topic[]>(`${this.api}/${criteria}`);\r\n    }\r\n\r\n    deleteTopic(id:number){\r\n        return this.http.delete(`${this.api}/${id}`);\r\n    }\r\n\r\n    addTopic(topic: Topic){\r\n        return this.http.post(this.api, topic);\r\n    }\r\n}\r\n","export class Topic {\n    id: number;\n    title: string;\n    theme?: Topic;\n\n\n    constructor(topic) {\n        {\n            this.id = topic.id;\n            this.title = topic.title;\n            this.theme = topic.parent || null;\n        }\n    }\n}\n"],"sourceRoot":"webpack:///"}